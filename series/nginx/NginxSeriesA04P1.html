<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>A04 ‚ùØ Secure Nginx Deployment | AlmaLinux Wiki</title>
    <meta name="generator" content="VuePress 1.9.10">
    <script>
	  var _paq = window._paq = window._paq || [];
	  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
	  _paq.push(['trackPageView']);
	  _paq.push(['enableLinkTracking']);
	  (function() {
	    var u="https://matomo.almalinux.org/";
	    _paq.push(['setTrackerUrl', u+'matomo.php']);
	    _paq.push(['setSiteId', '5']);
	    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	    g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
	  })();
</script>
    <link rel="shortcut icon" type="image/png" href="/images/logo.png">
    <meta name="description" content="AlmaLinux OS Documentation">
    
    <link rel="preload" href="/assets/css/0.styles.5d429379.css" as="style"><link rel="preload" href="/assets/js/app.5d5d81f8.js" as="script"><link rel="preload" href="/assets/js/2.592a6313.js" as="script"><link rel="preload" href="/assets/js/1.47e12c88.js" as="script"><link rel="preload" href="/assets/js/125.c8fae5cb.js" as="script"><link rel="prefetch" href="/assets/js/10.fde088a2.js"><link rel="prefetch" href="/assets/js/100.7aa8d447.js"><link rel="prefetch" href="/assets/js/101.25a38538.js"><link rel="prefetch" href="/assets/js/102.d15dae9b.js"><link rel="prefetch" href="/assets/js/103.d2afca82.js"><link rel="prefetch" href="/assets/js/104.d1efb05b.js"><link rel="prefetch" href="/assets/js/105.95fe89a3.js"><link rel="prefetch" href="/assets/js/106.d76f87d1.js"><link rel="prefetch" href="/assets/js/107.c3833038.js"><link rel="prefetch" href="/assets/js/108.0a67bed9.js"><link rel="prefetch" href="/assets/js/109.882be70b.js"><link rel="prefetch" href="/assets/js/11.c62b6b34.js"><link rel="prefetch" href="/assets/js/110.167b6e97.js"><link rel="prefetch" href="/assets/js/111.1efa4ee5.js"><link rel="prefetch" href="/assets/js/112.5a57829d.js"><link rel="prefetch" href="/assets/js/113.0668b905.js"><link rel="prefetch" href="/assets/js/114.0a782f96.js"><link rel="prefetch" href="/assets/js/115.990b50a1.js"><link rel="prefetch" href="/assets/js/116.2f5198b6.js"><link rel="prefetch" href="/assets/js/117.9e43449f.js"><link rel="prefetch" href="/assets/js/118.82f21642.js"><link rel="prefetch" href="/assets/js/119.64ad97f1.js"><link rel="prefetch" href="/assets/js/12.27d4f152.js"><link rel="prefetch" href="/assets/js/120.1f111176.js"><link rel="prefetch" href="/assets/js/121.01306db2.js"><link rel="prefetch" href="/assets/js/122.0d2823e1.js"><link rel="prefetch" href="/assets/js/123.44932088.js"><link rel="prefetch" href="/assets/js/124.b9db510c.js"><link rel="prefetch" href="/assets/js/126.00bd592a.js"><link rel="prefetch" href="/assets/js/127.e28dc74b.js"><link rel="prefetch" href="/assets/js/128.f6f50f54.js"><link rel="prefetch" href="/assets/js/129.d5f5f78d.js"><link rel="prefetch" href="/assets/js/13.419d7748.js"><link rel="prefetch" href="/assets/js/130.6954c395.js"><link rel="prefetch" href="/assets/js/131.9530e90c.js"><link rel="prefetch" href="/assets/js/132.9efbe97e.js"><link rel="prefetch" href="/assets/js/133.18ace903.js"><link rel="prefetch" href="/assets/js/134.f3be60e8.js"><link rel="prefetch" href="/assets/js/135.dcded378.js"><link rel="prefetch" href="/assets/js/136.945f5456.js"><link rel="prefetch" href="/assets/js/137.2d41bdf5.js"><link rel="prefetch" href="/assets/js/138.fdf77ff6.js"><link rel="prefetch" href="/assets/js/139.cb7aa382.js"><link rel="prefetch" href="/assets/js/14.eb7a3d07.js"><link rel="prefetch" href="/assets/js/140.20783ea7.js"><link rel="prefetch" href="/assets/js/141.f3d6005e.js"><link rel="prefetch" href="/assets/js/142.32083141.js"><link rel="prefetch" href="/assets/js/143.d67ceccf.js"><link rel="prefetch" href="/assets/js/144.9d710932.js"><link rel="prefetch" href="/assets/js/145.887534d5.js"><link rel="prefetch" href="/assets/js/146.f07fa267.js"><link rel="prefetch" href="/assets/js/15.114dfd5c.js"><link rel="prefetch" href="/assets/js/16.85253907.js"><link rel="prefetch" href="/assets/js/17.c2838453.js"><link rel="prefetch" href="/assets/js/18.3256f17f.js"><link rel="prefetch" href="/assets/js/19.d8afd0ae.js"><link rel="prefetch" href="/assets/js/20.0d880388.js"><link rel="prefetch" href="/assets/js/21.33b300c9.js"><link rel="prefetch" href="/assets/js/22.062d9eb1.js"><link rel="prefetch" href="/assets/js/23.da7efeec.js"><link rel="prefetch" href="/assets/js/24.70704f36.js"><link rel="prefetch" href="/assets/js/25.0317e1fe.js"><link rel="prefetch" href="/assets/js/26.8a20d889.js"><link rel="prefetch" href="/assets/js/27.cdba32aa.js"><link rel="prefetch" href="/assets/js/28.ba068fc4.js"><link rel="prefetch" href="/assets/js/29.01325dfb.js"><link rel="prefetch" href="/assets/js/3.af33e5d6.js"><link rel="prefetch" href="/assets/js/30.91ec98ec.js"><link rel="prefetch" href="/assets/js/31.1d80f8ff.js"><link rel="prefetch" href="/assets/js/32.9ab939c9.js"><link rel="prefetch" href="/assets/js/33.92946a7b.js"><link rel="prefetch" href="/assets/js/34.e9492907.js"><link rel="prefetch" href="/assets/js/35.c131a367.js"><link rel="prefetch" href="/assets/js/36.37c66636.js"><link rel="prefetch" href="/assets/js/37.42ea6b36.js"><link rel="prefetch" href="/assets/js/38.67969df4.js"><link rel="prefetch" href="/assets/js/39.18645cd5.js"><link rel="prefetch" href="/assets/js/4.0a92875f.js"><link rel="prefetch" href="/assets/js/40.cff03326.js"><link rel="prefetch" href="/assets/js/41.ef46e7bd.js"><link rel="prefetch" href="/assets/js/42.0026ef90.js"><link rel="prefetch" href="/assets/js/43.2b2a031a.js"><link rel="prefetch" href="/assets/js/44.9de0660c.js"><link rel="prefetch" href="/assets/js/45.ee6970b0.js"><link rel="prefetch" href="/assets/js/46.8cf85169.js"><link rel="prefetch" href="/assets/js/47.2ccad602.js"><link rel="prefetch" href="/assets/js/48.5027e078.js"><link rel="prefetch" href="/assets/js/49.abbb0a73.js"><link rel="prefetch" href="/assets/js/5.3b9be48d.js"><link rel="prefetch" href="/assets/js/50.47c6dd23.js"><link rel="prefetch" href="/assets/js/51.38406602.js"><link rel="prefetch" href="/assets/js/52.ed02df4b.js"><link rel="prefetch" href="/assets/js/53.f2d791d9.js"><link rel="prefetch" href="/assets/js/54.8286bc88.js"><link rel="prefetch" href="/assets/js/55.2c8c0cd0.js"><link rel="prefetch" href="/assets/js/56.870bc5be.js"><link rel="prefetch" href="/assets/js/57.8628b34d.js"><link rel="prefetch" href="/assets/js/58.e1bb50e9.js"><link rel="prefetch" href="/assets/js/59.968f7535.js"><link rel="prefetch" href="/assets/js/6.7b96ebf4.js"><link rel="prefetch" href="/assets/js/60.1722124a.js"><link rel="prefetch" href="/assets/js/61.d9ade605.js"><link rel="prefetch" href="/assets/js/62.a624a647.js"><link rel="prefetch" href="/assets/js/63.0ffa4b02.js"><link rel="prefetch" href="/assets/js/64.9ebd9265.js"><link rel="prefetch" href="/assets/js/65.6911ceb1.js"><link rel="prefetch" href="/assets/js/66.f0bd1977.js"><link rel="prefetch" href="/assets/js/67.69518c20.js"><link rel="prefetch" href="/assets/js/68.812cb210.js"><link rel="prefetch" href="/assets/js/69.f9d67f7f.js"><link rel="prefetch" href="/assets/js/7.7e58b9c4.js"><link rel="prefetch" href="/assets/js/70.a865bc9d.js"><link rel="prefetch" href="/assets/js/71.7790f230.js"><link rel="prefetch" href="/assets/js/72.15cf8c36.js"><link rel="prefetch" href="/assets/js/73.067d6c92.js"><link rel="prefetch" href="/assets/js/74.00dc9a16.js"><link rel="prefetch" href="/assets/js/75.0eb30678.js"><link rel="prefetch" href="/assets/js/76.86b9b096.js"><link rel="prefetch" href="/assets/js/77.6e617598.js"><link rel="prefetch" href="/assets/js/78.0c67adcf.js"><link rel="prefetch" href="/assets/js/79.aa3c2cac.js"><link rel="prefetch" href="/assets/js/80.fe7775cb.js"><link rel="prefetch" href="/assets/js/81.49af9da2.js"><link rel="prefetch" href="/assets/js/82.9166357d.js"><link rel="prefetch" href="/assets/js/83.d25164e5.js"><link rel="prefetch" href="/assets/js/84.7c422651.js"><link rel="prefetch" href="/assets/js/85.bf963e99.js"><link rel="prefetch" href="/assets/js/86.562398e1.js"><link rel="prefetch" href="/assets/js/87.ad942ee9.js"><link rel="prefetch" href="/assets/js/88.ae410c63.js"><link rel="prefetch" href="/assets/js/89.44777820.js"><link rel="prefetch" href="/assets/js/90.6a74fba6.js"><link rel="prefetch" href="/assets/js/91.b569c6b2.js"><link rel="prefetch" href="/assets/js/92.1527ba7d.js"><link rel="prefetch" href="/assets/js/93.068a9a69.js"><link rel="prefetch" href="/assets/js/94.38faa30f.js"><link rel="prefetch" href="/assets/js/95.03a6b598.js"><link rel="prefetch" href="/assets/js/96.2aef79c8.js"><link rel="prefetch" href="/assets/js/97.dc8b70c1.js"><link rel="prefetch" href="/assets/js/98.f4bfc774.js"><link rel="prefetch" href="/assets/js/99.ba638419.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.2493936b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d429379.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo.png" alt="AlmaLinux Wiki" class="logo"> <span class="site-name can-hide">AlmaLinux Wiki</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://lists.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mailing Lists
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://bugs.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bugs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/AlmaLinux/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://chat.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Chat
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://lists.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Mailing Lists
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://bugs.almalinux.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Bugs
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/AlmaLinux/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/" aria-current="page" class="sidebar-link">About</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/release-notes/" class="sidebar-heading clickable"><span>Release Notes</span> <span class="arrow right"></span></a> <!----></section></li><li><a href="/alesco.html" class="sidebar-link">ALESCo</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Contribute</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Development</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Documentation</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Comparison.html" class="sidebar-link">EL Distro Comparison</a></li><li><a href="/FAQ.html" class="sidebar-link">FAQ</a></li><li><a href="/Howto.html" class="sidebar-link">Howtos</a></li><li><a href="/development/openQA.html" class="sidebar-link">openQA Guide</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/series/" class="sidebar-heading clickable router-link-active open"><span>Howto Series</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/series/LAMP-server.html" class="sidebar-link">Deploy a LAMP server</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/series/nginx/" class="sidebar-heading clickable router-link-active open"><span>Nginx Series</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/series/nginx/NginxSeriesA01.html" class="sidebar-link">A01 ‚ùØ A Beginner's Guide</a></li><li><a href="/series/nginx/NginxSeriesA02R8.html" class="sidebar-link">A02 R8 ‚ùØ AlmaLinux 8.x Installation</a></li><li><a href="/series/nginx/NginxSeriesA02R91.html" class="sidebar-link">A02 R91 ‚ùØ AlmaLinux 9.1 Installation</a></li><li><a href="/series/nginx/NginxSeriesA02R92.html" class="sidebar-link">A02 R92 ‚ùØ AlmaLinux 9.2 Installation</a></li><li><a href="/series/nginx/NginxSeriesA03.html" class="sidebar-link">A03 ‚ùØ Default Configuration Guide</a></li><li><a href="/series/nginx/NginxSeriesA04P1.html" aria-current="page" class="active sidebar-link">A04 ‚ùØ Secure Nginx Deployment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/series/nginx/NginxSeriesA04P1.html#üåü-introduction" class="sidebar-link">üåü Introduction</a></li><li class="sidebar-sub-header"><a href="/series/nginx/NginxSeriesA04P1.html#üß†-fundamental-concepts" class="sidebar-link">üß† Fundamental Concepts</a></li><li class="sidebar-sub-header"><a href="/series/nginx/NginxSeriesA04P1.html#üìù-key-takeaways" class="sidebar-link">üìù Key Takeaways</a></li><li class="sidebar-sub-header"><a href="/series/nginx/NginxSeriesA04P1.html#üìñ-faq" class="sidebar-link">üìñ FAQ</a></li><li class="sidebar-sub-header"><a href="/series/nginx/NginxSeriesA04P1.html#üìö-further-reading-and-next-steps" class="sidebar-link">üìö Further reading and Next Steps</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><a href="/series/system/" class="sidebar-heading clickable"><span>System Series</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><a href="/documentation/guides" class="sidebar-heading clickable"><span>Security Guides</span> <span class="arrow right"></span></a> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Installation</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/migration" class="sidebar-heading clickable"><span>Migration</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>The Foundation</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/Help-and-Support.html" class="sidebar-link">Help and Support</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="a04-‚ùØ-secure-nginx-deployment"><a href="#a04-‚ùØ-secure-nginx-deployment" class="header-anchor">#</a> A04 ‚ùØ Secure Nginx Deployment</h1> <p><small>‚ÑπÔ∏è This article is part of AlmaLinux <a href="/series/" class="router-link-active">Nginx Series</a>.</small></p><hr><p></p> <table><thead><tr><th>üí°</th> <th>Experience Level</th> <th>‚≠ê‚òÜ‚òÜ‚òÜ‚òÜ</th></tr></thead> <tbody><tr><td>üìÜ</td> <td><small>Last modified </small></td> <td>2023-05-16</td></tr> <tr><td>üîß</td> <td><small>Tested by <br> ‚Ü≥ version | platform | date </small></td> <td><small><a href="mailto:psuchanecki@almalinux.org">Pawel Suchanecki</a> <br>  ‚Ü≥ 9.1 | x86_64 | 2023-04-21 </small></td></tr></tbody></table> <br> <h2 id="üåü-introduction"><a href="#üåü-introduction" class="header-anchor">#</a> üåü Introduction</h2> <p>As Nginx is a high-performance web server commonly used in public environments it makes it a prime target for malicious attacks. To enhance the security of your Nginx server and protect your web content, it's important to secure your system. This guide presents a few simple steps you can take to secure your Nginx server and help prevent unauthorized access.</p> <h2 id="üß†-fundamental-concepts"><a href="#üß†-fundamental-concepts" class="header-anchor">#</a> üß† Fundamental Concepts</h2> <h3 id="general-protection"><a href="#general-protection" class="header-anchor">#</a> General Protection</h3> <h4 id="regular-updates-and-patches"><a href="#regular-updates-and-patches" class="header-anchor">#</a> Regular Updates and Patches</h4> <p>Keeping your Nginx installation up-to-date is essential in ensuring that it is secure. Regularly check for software updates and patches from the official repository to stay informed of any vulnerabilities or bugs that could affect your Nginx server.</p> <h4 id="file-and-directory-permissions"><a href="#file-and-directory-permissions" class="header-anchor">#</a> File and Directory Permissions</h4> <p>Make sure that the file and directory permissions are set appropriately for your Nginx server. Only allow users with the appropriate permissions to access the files and directories.</p> <h4 id="use-a-dedicated-user-account"><a href="#use-a-dedicated-user-account" class="header-anchor">#</a> Use a Dedicated User Account</h4> <p>Running Nginx as a dedicated user account can help limit the damage caused by an attacker if your server is compromised. This is because a dedicated user account only has access to the files and directories required to run Nginx, reducing the potential damage an attacker can cause if they gain access to your server.</p> <h4 id="restrict-access-to-sensitive-information"><a href="#restrict-access-to-sensitive-information" class="header-anchor">#</a> Restrict Access to Sensitive Information</h4> <p>To reduce the risk of exposing sensitive information, limit access to sensitive information on your server. You can do this by ensuring that only authorized users have access to sensitive files and directories.</p> <h4 id="monitor-logs"><a href="#monitor-logs" class="header-anchor">#</a> Monitor Logs</h4> <p>Monitoring your Nginx server logs can help you detect and respond to security incidents quickly. Regularly reviewing your logs can help you identify any suspicious activity or unauthorized access attempts. You can also set up alerts or notifications to receive notifications when specific events occur, such as failed login attempts.</p> <h3 id="security-must-haves"><a href="#security-must-haves" class="header-anchor">#</a> Security must-haves</h3> <p>‚ö†Ô∏è  Implement a firewall to block all incoming traffic (default on AlmaLinux) except for the ports you want to allow. For a web server like Nginx, you typically want to allow ports for HTTP and HTTPS services.</p> <p>‚ö†Ô∏è  Use secure protocols for accessing your server, such as SSH, and disable password-based authentication in favor of public-key authentication.</p> <p>‚ö†Ô∏è  Use secure coding practices when developing your web application or service, such as input validation and sanitization, to prevent common web vulnerabilities like SQL injection and cross-site scripting (XSS).</p> <h3 id="configuration-specific-practices"><a href="#configuration-specific-practices" class="header-anchor">#</a> Configuration Specific Practices</h3> <p>‚û°Ô∏è  Enable SSL/TLS encryption to encrypt your web traffic, preventing attackers from intercepting sensitive information. Obtaining an SSL certificate from a trusted certificate authority like Let's Encrypt is recommended.</p> <p>‚û°Ô∏è  Implement user authentication using the <code>htpasswd</code> tool to restrict access to your Nginx server and control access to specific areas of your site.</p> <p>‚û°Ô∏è  Implement rate limiting to limit the number of requests from a particular IP address over a given period, preventing denial-of-service (DoS) attacks and other malicious traffic.</p> <p>‚û°Ô∏è  Disable server tokens in Nginx to prevent revealing information about the software and version being used, making it harder for attackers to find potential vulnerabilities in your server.</p> <h2 id="üìù-key-takeaways"><a href="#üìù-key-takeaways" class="header-anchor">#</a> üìù Key Takeaways</h2> <h3 id="step-1-check-the-firewalld-configuration"><a href="#step-1-check-the-firewalld-configuration" class="header-anchor">#</a> Step 1: Check The Firewalld Configuration</h3> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>On AlmaLinux OS, the Firewalld packet filtering service is enabled by default.</p></div> <p>To allow incoming traffic on ports 80 (HTTP) and 443 (HTTPS), run:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo firewall-cmd --permanent --zone=public --add-service={http,https}
</code></pre></div><p>Then just reload the rules:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo firewall-cmd --reload
</code></pre></div><h3 id="step-2-enable-ssl-tls-encryption"><a href="#step-2-enable-ssl-tls-encryption" class="header-anchor">#</a> Step 2: Enable SSL/TLS Encryption</h3> <p>Encrypting your web traffic using SSL/TLS is an essential step in securing your Nginx installation. To enable SSL/TLS encryption, you will need to obtain an SSL certificate and configure Nginx to use it.
One way to obtain an SSL certificate is to use Let's Encrypt, a free, automated, and open certificate authority.</p> <p>To install Let's Encrypt on AlmaLinux 9.x, run the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo dnf install certbot python3-certbot-nginx
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>The <code>python3-certbot-nginx</code> package is from EPEL repository, so if you get error to the above, just do:</p> <div class="language- extra-class"><pre class="language-text"><code>dnf install epel-release
</code></pre></div></div> <p>Then, obtain an SSL certificate for your domain by running the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo certbot --nginx -d almalinux.example.com
</code></pre></div><p>Replace example.com with your domain name.</p> <h4 id="example-on-success"><a href="#example-on-success" class="header-anchor">#</a> Example on success:</h4> <div class="language- extra-class"><pre class="language-text"><code>...
Deploying certificate
Successfully deployed certificate for almalinux.example.com to /etc/nginx/nginx.conf
Congratulations! You have successfully enabled HTTPS on https://almalinux.example.com
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>After successful configuration, '/etc/nginx/nginx.conf' will contain these new lines:</p> <details class="custom-block details"><summary>DETAILS</summary> <div class="language- extra-class"><pre class="language-text"><code>    listen [::]:443 ssl ipv6only=on; # managed by Certbot
    listen 443 ssl; # managed by Certbot
    ssl_certificate /etc/letsencrypt/live/almalinux.example.com/fullchain.pem; # managed by Certbot
    ssl_certificate_key /etc/letsencrypt/live/almalinux.example.com/privkey.pem; # managed by Certbot
    include /etc/letsencrypt/options-ssl-nginx.conf; # managed by Certbot
    ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem; # managed by Certbot
    
    
     server {
        if ($host = almalinux.example.com) {
            return 301 https://$host$request_uri;
        } # managed by Certbot
        listen       80;
        listen       [::]:80;
        server_name  almalinux.example.com;
        return 404; # managed by Certbot
    }
</code></pre></div></details></div> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>If you get this weird error:</p> <div class="language- extra-class"><pre class="language-text"><code>...
Deploying certificate
Could not install certificate
An unexpected error occurred:
OpenSSL.crypto.Error: [('Provider routines', '', 'invalid key length')]
Ask for help or search for solutions at https://community.letsencrypt.org. See the logfile /var/log/letsencrypt/letsencrypt.log or re-run Certbot with -v for more details.
</code></pre></div><p>Please check if you have FIPS mode enabled which prevents 'unauthorized' uses of OpenSSL framework (instruction in Details).</p> <details class="custom-block details"><summary>DETAILS</summary> <div class="language- extra-class"><pre class="language-text"><code>fips-mode-setup --check
</code></pre></div><p>Should tell you:
<code>FIPS mode is disabled.</code></p> <p>If does not you need to disable the FIPS for the time of generation:</p> <ul><li>Disable it:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>fips-mode-setup --disable
</code></pre></div><ul><li>Reboot the system!
¬†</li> <li>Regenerate the certificate (or just reinstall - <code>certbot</code> will offer that option when runs again) with the command that previously failed (above).</li> <li>Renable FIPS:</li></ul> <div class="language- extra-class"><pre class="language-text"><code>fips-mode-setup --enable
</code></pre></div><ul><li>Reboot the system!</li></ul></details></div> <h4 id="check-if-that-works"><a href="#check-if-that-works" class="header-anchor">#</a> Check if that works!</h4> <p>Navigate your browser to your site with <code>https</code> protocol prefix.
(Like: https://almalinux.example.com). <u>Now the connection is encrypted</u>(üîí).</p> <h3 id="step-3-implement-user-authentication"><a href="#step-3-implement-user-authentication" class="header-anchor">#</a> Step 3: Implement User Authentication</h3> <p>If you want to restrict access to your Nginx server, you can implement user authentication using the <code>htpasswd</code> tool.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>htpasswd</code> manages user accounts and passwords for accessing restricted areas of your website, helping to add basic authentication to your Nginx server and control access to specific areas of your site.</p></div> <p>To do this, run the following command to install <code>httpd-tools</code> package:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo dnf install httpd-tools
</code></pre></div><p>Then, create a password file for your user by running the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>sudo htpasswd -c /etc/nginx/.htpasswd myuser
</code></pre></div><p>Replace <code>myuser</code> with your desired username.</p> <p>Finally, add the following configuration to your Nginx server block to require authentication for all requests (lines starting with <code>auth_basic</code>):</p> <div class="language- extra-class"><pre class="language-text"><code>server {
    listen 80;
    server_name example.com;
    root /var/www/example.com;
    index index.html;

    auth_basic &quot;Restricted Access&quot;;
    auth_basic_user_file /etc/nginx/.htpasswd;

    location / {
        try_files $uri $uri/ =404;
    }
}
</code></pre></div><p>Accessing the site will prompt user for username and password now.</p> <h3 id="step-4-implement-rate-limiting"><a href="#step-4-implement-rate-limiting" class="header-anchor">#</a> Step 4: Implement Rate Limiting</h3> <p>Rate limiting is a technique used to limit the number of requests from a particular IP address over a given period. This can help prevent denial-of-service (DoS) attacks and other malicious traffic.</p> <p>To implement rate limiting in Nginx, add the following configuration to your server block (lines starting with <code>limit_req*</code>)</p> <div class="language- extra-class"><pre class="language-text"><code>server {
    listen 80;
    server_name example.com;
    root /var/www/example.com;
    index index.html;

    limit_req zone=one burst=5 nodelay;
    limit_req_zone $binary_remote_addr zone=one:10m rate=1r/s;

    location / {
        try_files $uri $uri/ =404;
    }
}
</code></pre></div><p>This configuration will limit requests to one request per second per IP address, with a burst of 5 requests allowed before blocking further requests. The nodelay parameter ensures that requests exceeding the limit are blocked immediately.</p> <p>Note: both can be added to <code>http</code> block.</p> <details class="custom-block details"><summary>DETAILS</summary> <p>For more info on rate limitting please read <strong><a href="https://www.nginx.com/blog/rate-limiting-nginx/" target="_blank" rel="noopener noreferrer"> a dedicated blog post Nginx.org <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></strong></p></details> <h3 id="step-5-disable-server-tokens"><a href="#step-5-disable-server-tokens" class="header-anchor">#</a> Step 5: Disable Server Tokens</h3> <p>By default, Nginx includes server tokens in its response headers, which can reveal information about the software and version being used. This can be useful for attackers to find potential vulnerabilities in your server.</p> <p>To disable server tokens in Nginx, add the following configuration to your <code>nginx.conf</code> file:</p> <div class="language- extra-class"><pre class="language-text"><code>server_tokens off;
</code></pre></div><p>As with all the changes to the configuration file you need to reload the server for this to be effective:</p> <div class="language- extra-class"><pre class="language-text"><code>systemctl reload nginx
</code></pre></div><h2 id="üìñ-faq"><a href="#üìñ-faq" class="header-anchor">#</a> üìñ FAQ</h2> <h4 id="q-how-to-fix-nginx-stat-failed-13-permission-denied-with-selinux-enabled"><a href="#q-how-to-fix-nginx-stat-failed-13-permission-denied-with-selinux-enabled" class="header-anchor">#</a> Q: How to fix <code>Nginx: stat() failed (13: Permission denied)</code> with SELinux enabled?</h4> <p>Context: Nginx server is running under the user &quot;nginx&quot; and has access to to the files. But when I am attempting to list the contents of the /usr/share/nginx/srv/downloads/ directory on my server using a web browser. I have installed the Nginx server and set up configuration files, but when I try to access the directory, not all content is listed, and I receive a &quot;Permission denied&quot; error. The error message is as follows:</p> <div class="language- extra-class"><pre class="language-text"><code>2023/04/27 17:08:54 [crit] 12839#0: *1 stat() &quot;/usr/share/nginx/srv/downloads/file.txt&quot; failed (13: Permission denied), client: 192.168.0.26, server: localhost, request: &quot;GET /downloads/ HTTP/1.1&quot;, host: &quot;localhost&quot;
</code></pre></div><p>The Nginx server is running under the user &quot;nginx,&quot; which is part of the &quot;devs&quot; group. I have verified that the user has access to the files by running the following command:</p> <div class="language- extra-class"><pre class="language-text"><code>su -l nginx -s /bin/stat /usr/share/nginx/srv/downloads/file.txt
</code></pre></div><p>The output indicates that the user has the necessary permissions:</p> <div class="language- extra-class"><pre class="language-text"><code>Last login: Thu Apr 28 09:30:19 CEST 2023 on pts/0
  File: '/usr/share/nginx/srv/downloads/file.txt'
  Size: 0           Blocks: 0          IO Block: 4096   regular empty file
Device: fd00h/64768d    Inode: 85524762    Links: 1
Access: (0644/-rw-r--r--)  Uid: ( 1000/    is)   Gid: ( 1000/    devs)
Context: system_u:object_r:httpd_sys_content_t:s0
Access: 2023-04-28 09:45:48.393259661 +0200
Modify: 2023-04-28 09:45:48.393259661 +0200
Change: 2023-04-28 09:45:48.393259661 +0200
 Birth: - 
</code></pre></div><p>I also tried with the user www-data, but the issue persists.</p> <p><strong>A:</strong></p> <ol><li><strong>Reproduce the problem</strong>
This issue is likely related to SELinux blocking access to the directory. To confirm if it's an SELinux issue, temporarily disable SELinux by running</li></ol> <div class="language- extra-class"><pre class="language-text"><code>sudo setenforce 0
</code></pre></div><p>then try loading the directory again.</p> <ol start="2"><li><strong>Generate SELinux policy</strong></li></ol> <p>If this resolves the issue, you will need to adjust the context of the directory to allow Nginx access or use <code>audit2allow</code> to identify a SELinux boolean that can be changed.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><code>audit2allow</code> - generate SELinux policy allow/dontaudit rules from logs of denied operations</p></div> <ol start="3"><li><strong>Fix the SELinux issue</strong></li></ol> <div class="language- extra-class"><pre class="language-text"><code>sudo semanage fcontext -a -t httpd_sys_content_t &quot;/usr/share/nginx/srv(/.*)?&quot;
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>sudo restorecon -R -v /usr/share/nginx/srv
</code></pre></div><p>The first command tells SELinux that the <code>/usr/share/nginx/srv</code> directory contains read-only content for an HTTP server. The second command relabels all the files in the <code>/usr/share/nginx/srv</code> directory with the correct context.</p> <ol start="4"><li><strong>Re-enable SELinux</strong></li></ol> <div class="language- extra-class"><pre class="language-text"><code>sudo setenforce 1
</code></pre></div><h2 id="üìö-further-reading-and-next-steps"><a href="#üìö-further-reading-and-next-steps" class="header-anchor">#</a> üìö Further reading and Next Steps</h2> <p><u>Get Back:</u></p> <ul><li>AlmaLinux Nginx Series ‚ùØ <a href="/series/nginx/NginxSeriesA01.html">A Beginner's Guide</a></li> <li>AlmaLinux Nginx Series ‚ùØ <a href="/series/nginx/NginxSeriesA01R8.html">AlmaLinux OS 8.x Installation</a></li> <li>AlmaLinux Nginx Series ‚ùØ <a href="/series/nginx/NginxSeriesA02R91.html">AlmaLinux OS 9.1 Installation</a></li> <li>AlmaLinux Nginx Series ‚ùØ <a href="/series/nginx/NginxSeriesA02R92.html">AlmaLinux OS 9.2 Installation</a></li></ul> <p><u>In-depth Resources:</u></p> <p><u>Related Resources:</u></p> <ul><li>AlmaLinux Firewalld Series ‚ùØ <a href="/series/system/SystemSeriesA02.html">A Beginner's Guide</a></li> <li>AlmaLinux System Series ‚ùØ <a href="/series/system/SystemSeriesA01.html">Application Streams</a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ‚Üê
      <a href="/series/nginx/NginxSeriesA03.html" class="prev">
        A03 ‚ùØ Default Configuration Guide
      </a></span> <span class="next"><a href="/series/system/SystemSeriesA01.html">
        A01 ‚ùØ Application Streams
      </a>
      ‚Üí
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5d5d81f8.js" defer></script><script src="/assets/js/2.592a6313.js" defer></script><script src="/assets/js/1.47e12c88.js" defer></script><script src="/assets/js/125.c8fae5cb.js" defer></script>
  </body>
</html>
